<!-- login.page.html -->
<ion-header>
  <ion-toolbar>
    <ion-title>Login</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="loginForm" (ngSubmit)="login()">
    <ion-item>
      <ion-label position="floating">Username</ion-label>
      <ion-input formControlName="username" type="text"></ion-input>
    </ion-item>
    @if(loginForm.controls.username.invalid && (loginForm.controls.username.dirty || loginForm.controls.username.touched)){
      <ion-item>
        <ion-text color="danger">
          <p>Username is required</p>
        </ion-text>
      </ion-item>
    }
    <ion-item>
      <ion-label position="floating">Password</ion-label>
      <ion-input formControlName="password" type="password"></ion-input>
    </ion-item>
    @if (loginForm.controls.password.invalid && (loginForm.controls.password.dirty || loginForm.controls.password.touched)){
      <ion-item>
        <ion-text color="danger">
          @if (loginForm.controls.password.errors){
            <p>Password is required</p>
          }
        </ion-text>
      </ion-item>
    }
    <ion-item>
      <ion-label position="floating">Environment</ion-label>
      <ion-input formControlName="environment" type="text"></ion-input>
    </ion-item>
    @if (loginForm.controls.environment.invalid && (loginForm.controls.environment.dirty || loginForm.controls.environment.touched)){
      <ion-item>
        <ion-text color="danger">
          @if (loginForm.controls.environment.errors){
            <p >Environment is required</p>
          }
        </ion-text>
      </ion-item>
    }
    <ion-button type="submit" expand="block" [disabled]="loginForm.invalid">Login</ion-button>
  </form>
</ion-content>
